

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Awareness HA Deployment &mdash; Zisoft Awareness 3.0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ZiSoft Awareness HW Sizing" href="../sizing/sizing.html" />
    <link rel="prev" title="Initial Configuration" href="../user_guide/user_guide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Zisoft Awareness
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html#faq">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html">Initial Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html#training-campaign">Training Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html#email-server-settings">Email Server Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html#phishing">Phishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html#reporting">Reporting</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Awareness HA Deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nfs-rhel-centos-debian-ubuntu">NFS: RHEL/CentOS/ Debian/Ubuntu</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nfs-services">NFS Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#important-files-for-nfs-configuration">Important Files for NFS Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-and-configure-nfs-mounts-on-linux-server">Setup and Configure NFS Mounts on Linux Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-nfs-server-and-nfs-client">Installing NFS Server and NFS Client</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-nfs-server">Setting Up the NFS Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configure-export-directory">Configure Export directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nfs-options">NFS Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-nfs-client">Setting Up the NFS Client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mount-shared-directories-on-nfs-client">Mount Shared Directories on NFS Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mount-shared-nfs-directory">Mount Shared NFS Directory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#test-the-working-of-nfs-setup">Test the Working of NFS Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#at-the-nfsserver-end">At the nfsserver end</a></li>
<li class="toctree-l4"><a class="reference internal" href="#at-the-nfsclient-end">At the nfsclient end</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#removing-the-nfs-mount">Removing the NFS Mount</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#important-commands-for-nfs">Important commands for NFS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-swarm-cluster">Create a swarm Cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init-swarm-manager-node">Init Swarm Manager Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-nodes-to-the-swarm">Add nodes to the swarm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#clone-zisoft-awareness-project">Clone Zisoft awareness  project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploy-zisoft-awareness-offline-project">Deploy Zisoft awareness offline project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#awareness-offline-deployment">Awareness Offline Deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extract-zisoft-xxxxxxx-zip-file">Extract zisoft-xxxxxxx.Zip file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-zisoft-awareness-docker-images">Load Zisoft awareness docker images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Deploy Zisoft awareness offline project</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">sizing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sizing/sizing.html"><strong>ZiSoft Awareness HW Sizing</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../sizing/sizing.html#zisoft-awareness-load-testing"><strong>ZiSoft Awareness Load Testing</strong></a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Zisoft Awareness</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Awareness HA Deployment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Deployment/deployment.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>Deployment</p>
<div class="section" id="awareness-ha-deployment">
<h1>Awareness HA Deployment<a class="headerlink" href="#awareness-ha-deployment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nfs-rhel-centos-debian-ubuntu">
<h2>NFS: RHEL/CentOS/ Debian/Ubuntu<a class="headerlink" href="#nfs-rhel-centos-debian-ubuntu" title="Permalink to this headline">¶</a></h2>
<p>==============================================================================</p>
<ol class="simple">
<li><strong>NFS</strong> allows local access to remote files.</li>
<li>It uses standard <strong>client</strong>/<strong>server</strong> architecture for file sharing
between all *<strong>nix</strong> based machines.</li>
<li>With <strong>NFS</strong> it is not necessary that both machines run on the same
<strong>OS</strong>.</li>
</ol>
<p><img alt="https://awareness-docs.s3.us-east-2.amazonaws.com/_static/images/nfs.png" src="https://awareness-docs.s3.us-east-2.amazonaws.com/_static/images/nfs.png" />
4.  With the help of <strong>NFS</strong> we can configure <strong>centralized storage</strong>
solutions.
5.  Users get their <strong>data</strong> irrespective of physical location.
6.  No manual <strong>refresh</strong> needed for new files.
7.  Newer version of <strong>NFS</strong> also supports <strong>acl</strong>, <strong>pseudo</strong> root
mounts.
8.  Can be secured with <strong>Firewalls</strong> and <strong>Kerberos</strong>.</p>
<div class="section" id="nfs-services">
<h3>NFS Services<a class="headerlink" href="#nfs-services" title="Permalink to this headline">¶</a></h3>
<p>Its a <strong>System V-launched</strong> service. The <strong>NFS</strong> server package includes
three facilities, included in the <strong>portmap</strong> and <strong>nfs-utils</strong>
packages.</p>
<ol class="simple">
<li><strong>portmap</strong> : It maps calls made from other machines to the correct
<strong>RPC</strong> service (not required with <strong>NFSv4</strong>).</li>
<li><strong>nfs</strong>: It translates remote <strong>file sharing</strong> requests into
requests on the local file system.</li>
<li><strong>rpc.mountd</strong>: This service is responsible for <strong>mounting</strong> and
<strong>unmounting</strong> of file systems.</li>
</ol>
</div>
<div class="section" id="important-files-for-nfs-configuration">
<h3>Important Files for NFS Configuration<a class="headerlink" href="#important-files-for-nfs-configuration" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><strong>/etc/exports</strong> : Its a main configuration file of <strong>NFS</strong>, all
exported <strong>files</strong> and <strong>directories</strong> are defined in this file at
the <strong>NFS Server</strong> end.</li>
<li><strong>/etc/fstab</strong> : To mount a <strong>NFS directory</strong> on your system across
the <strong>reboots</strong>, we need to make an entry in <strong>/etc/fstab</strong>.</li>
<li><strong>/etc/sysconfig/nfs</strong> : Configuration file of <strong>NFS</strong> to control on
which port <strong>rpc</strong> and other services are <strong>listening</strong>.</li>
</ol>
</div>
<div class="section" id="setup-and-configure-nfs-mounts-on-linux-server">
<h3>Setup and Configure NFS Mounts on Linux Server<a class="headerlink" href="#setup-and-configure-nfs-mounts-on-linux-server" title="Permalink to this headline">¶</a></h3>
<p>To setup <strong>NFS</strong> mounts, we’ll be needing at least two
<strong>Linux</strong>/<strong>Unix</strong> machines. Here in this tutorial, I’ll be using two
servers.</p>
<ol class="simple">
<li><strong>NFS Server</strong>: nfsserver.example.com with IP-<strong>192.168.0.100</strong></li>
<li><strong>NFS Client</strong> : nfsclient.example.com with IP-<strong>192.168.0.101</strong></li>
</ol>
<div class="section" id="installing-nfs-server-and-nfs-client">
<h4>Installing NFS Server and NFS Client<a class="headerlink" href="#installing-nfs-server-and-nfs-client" title="Permalink to this headline">¶</a></h4>
<p>We need to install <strong>NFS</strong> packages on our <strong>NFS Server</strong> as well as on
<strong>NFS Client</strong> machine. We can install it via “<strong>yum</strong>” (<strong>Red Hat</strong>
Linux) and “<strong>apt-get</strong>” (<strong>Debian</strong> and <strong>Ubuntu</strong>) package installers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># yum install nfs-utils nfs-utils-lib</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># yum install portmap (not required with NFSv4)</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># apt-get install nfs-utils nfs-utils-lib</span>
</pre></div>
</div>
<p>Now start the <strong>services</strong> on both machines.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># /etc/init.d/portmap start</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># /etc/init.d/nfs start</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># chkconfig --level 35 portmap on</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># chkconfig --level 35 nfs on</span>
</pre></div>
</div>
<p>After installing packages and starting services on both the machines, we
need to configure both the machines for file sharing.</p>
</div>
</div>
<div class="section" id="setting-up-the-nfs-server">
<h3>Setting Up the NFS Server<a class="headerlink" href="#setting-up-the-nfs-server" title="Permalink to this headline">¶</a></h3>
<p>First we will be configuring the <strong>NFS</strong> server.</p>
<div class="section" id="configure-export-directory">
<h4>Configure Export directory<a class="headerlink" href="#configure-export-directory" title="Permalink to this headline">¶</a></h4>
<p>For sharing a directory with <strong>NFS</strong>, we need to make an entry in
“<strong>/etc/exports</strong>” configuration file. Here I’ll be creating a new
directory named “<strong>nfsshare</strong>” in “<strong>/</strong>” partition to share with
<strong>client server</strong>, you can also share an already existing directory with
NFS.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># mkdir /nfsshare</span>
</pre></div>
</div>
<p>Now we need to make an entry in “<strong>/etc/exports</strong>” and <strong>restart</strong> the
services to make our directory shareable in the network.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># vi /etc/exports</span>

<span class="o">/</span><span class="n">nfsshare</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.101</span><span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">sync</span><span class="p">,</span><span class="n">no_root_squash</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above example, there is a directory in <strong>/</strong> partition named
“<strong>nfsshare</strong>” is being shared with client IP “<strong>192.168.0.101</strong>” with
<strong>read</strong> and <strong>write</strong> (<strong>rw</strong>) privilege, you can also use <strong>hostname</strong>
of the client in the place of <strong>IP</strong> in above example.</p>
</div>
<div class="section" id="nfs-options">
<h4>NFS Options<a class="headerlink" href="#nfs-options" title="Permalink to this headline">¶</a></h4>
<p>Some other options we can use in “<strong>/etc/exports</strong>” file for file
sharing is as follows.</p>
<ol class="simple">
<li><strong>ro</strong>: With the help of this option we can provide <strong>read only
access</strong> to the shared files i.e <strong>client</strong> will only be able to
<strong>read</strong>.</li>
<li><strong>rw</strong>: This option allows the <strong>client server</strong> to both <strong>read</strong>
and <strong>write</strong> access within the shared directory.</li>
<li><strong>sync</strong>: Sync confirms requests to the shared directory only once
the <strong>changes</strong> have been committed.</li>
<li><strong>no_subtree_check</strong>: This option prevents the <strong>subtree</strong>
checking. When a shared directory is the subdirectory of a larger
file system, <strong>nfs</strong> performs scans of every directory above it, in
order to verify its permissions and details. Disabling the
<strong>subtree</strong> check may increase the reliability of <strong>NFS</strong>, but
reduce <strong>security</strong>.</li>
<li><strong>no_root_squash</strong>: This phrase allows <strong>root</strong> to <strong>connect</strong> to
the designated directory.</li>
</ol>
<p>For more options with “<strong>/etc/exports</strong>“, you are recommended to read
the <strong>man pages</strong> for <strong>export</strong>.</p>
</div>
</div>
<div class="section" id="setting-up-the-nfs-client">
<h3>Setting Up the NFS Client<a class="headerlink" href="#setting-up-the-nfs-client" title="Permalink to this headline">¶</a></h3>
<p>After configuring the <strong>NFS</strong> server, we need to <strong>mount</strong> that shared
directory or partition in the <strong>client</strong> server.</p>
<div class="section" id="mount-shared-directories-on-nfs-client">
<h4>Mount Shared Directories on NFS Client<a class="headerlink" href="#mount-shared-directories-on-nfs-client" title="Permalink to this headline">¶</a></h4>
<p>Now at the <strong>NFS client</strong> end, we need to <strong>mount</strong> that directory in
our server to access it locally. To do so, first we need to find out
that shares available on the remote server or NFS Server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># showmount -e 192.168.0.100</span>

<span class="n">Export</span> <span class="nb">list</span> <span class="k">for</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.100</span><span class="p">:</span>
<span class="o">/</span><span class="n">nfsshare</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.101</span>
</pre></div>
</div>
<p>Above command shows that a directory named “<strong>nfsshare</strong>” is available
at “<strong>192.168.0.100</strong>” to share with your server.</p>
</div>
<div class="section" id="mount-shared-nfs-directory">
<h4>Mount Shared NFS Directory<a class="headerlink" href="#mount-shared-nfs-directory" title="Permalink to this headline">¶</a></h4>
<p>To <strong>mount</strong> that shared <strong>NFS</strong> directory we can use following mount
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># mount -t nfs 192.168.0.100:/nfsshare /mnt/nfsshare</span>
</pre></div>
</div>
<p>The above command will mount that shared directory in
“<strong>/mnt/nfsshare</strong>” on the client server. You can verify it following
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># mount | grep nfs</span>

<span class="n">sunrpc</span> <span class="n">on</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">nfs</span><span class="o">/</span><span class="n">rpc_pipefs</span> <span class="nb">type</span> <span class="n">rpc_pipefs</span> <span class="p">(</span><span class="n">rw</span><span class="p">)</span>
<span class="n">nfsd</span> <span class="n">on</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">nfsd</span> <span class="nb">type</span> <span class="n">nfsd</span> <span class="p">(</span><span class="n">rw</span><span class="p">)</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">0.100</span><span class="p">:</span><span class="o">/</span><span class="n">nfsshare</span> <span class="n">on</span> <span class="o">/</span><span class="n">mnt</span> <span class="nb">type</span> <span class="n">nfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">addr</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.100</span><span class="p">)</span>
</pre></div>
</div>
<p>The above mount command mounted the <strong>nfs shared directory</strong> on to <strong>nfs
client</strong> temporarily, to mount an NFS directory <strong>permanently</strong> on your
system across the <strong>reboots</strong>, we need to make an entry in
“<strong>/etc/fstab</strong>“.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># vi /etc/fstab</span>
</pre></div>
</div>
<p>Add the following new line as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.100</span><span class="p">:</span><span class="o">/</span><span class="n">nfsshare</span> <span class="o">/</span><span class="n">mnt</span>  <span class="n">nfs</span> <span class="n">defaults</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="test-the-working-of-nfs-setup">
<h3>Test the Working of NFS Setup<a class="headerlink" href="#test-the-working-of-nfs-setup" title="Permalink to this headline">¶</a></h3>
<p>We can test our <strong>NFS server setup</strong> by creating a <strong>test file</strong> on the
server end and check its availability at <strong>nfs client</strong> side or
vice-versa.</p>
<div class="section" id="at-the-nfsserver-end">
<h4>At the nfsserver end<a class="headerlink" href="#at-the-nfsserver-end" title="Permalink to this headline">¶</a></h4>
<p>I have created a new text file named “<strong>nfstest.txt</strong>’ in that shared
directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsserver</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat &gt; /nfsshare/nfstest.txt</span>

<span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">test</span> <span class="n">file</span> <span class="n">to</span> <span class="n">test</span> <span class="n">the</span> <span class="n">working</span> <span class="n">of</span> <span class="n">NFS</span> <span class="n">server</span> <span class="n">setup</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="at-the-nfsclient-end">
<h4>At the nfsclient end<a class="headerlink" href="#at-the-nfsclient-end" title="Permalink to this headline">¶</a></h4>
<p>Go to that shared directory in <strong>client server</strong> and you’ll find that
shared file without any manual refresh or service restart.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsclient</span><span class="p">]</span><span class="c1"># ll /mnt/nfsshare</span>
<span class="n">total</span> <span class="mi">4</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">61</span> <span class="n">Sep</span> <span class="mi">21</span> <span class="mi">21</span><span class="p">:</span><span class="mi">44</span> <span class="n">nfstest</span><span class="o">.</span><span class="n">txt</span>
<span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat /mnt/nfsshare/nfstest.txt</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">test</span> <span class="n">file</span> <span class="n">to</span> <span class="n">test</span> <span class="n">the</span> <span class="n">working</span> <span class="n">of</span> <span class="n">NFS</span> <span class="n">server</span> <span class="n">setup</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="removing-the-nfs-mount">
<h3>Removing the NFS Mount<a class="headerlink" href="#removing-the-nfs-mount" title="Permalink to this headline">¶</a></h3>
<p>If you want to <strong>unmount</strong> that shared directory from your server after
you are done with the file sharing, you can simply <strong>unmount</strong> that
particular directory with “<strong>umount</strong>” command. See this example below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># umount /mnt/nfsshare</span>
</pre></div>
</div>
<p>You can see that the mounts were removed by then looking at the
filesystem again.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@nfsclient</span> <span class="o">~</span><span class="p">]</span><span class="c1"># df -h -F nfs</span>
</pre></div>
</div>
<p>You’ll see that those shared directories are not available any more.</p>
<div class="section" id="important-commands-for-nfs">
<h4>Important commands for NFS<a class="headerlink" href="#important-commands-for-nfs" title="Permalink to this headline">¶</a></h4>
<p>Some more important commands for <strong>NFS</strong>.</p>
<ol class="simple">
<li><strong>showmount -e</strong> : Shows the available <strong>shares</strong> on your local
machine</li>
<li><strong>showmount -e</strong> <strong>&lt;server-ip or hostname&gt;</strong>: Lists the available
<strong>shares</strong> at the <strong>remote</strong> server</li>
<li><strong>showmount -d</strong> : Lists all the <strong>sub directories</strong></li>
<li><strong>exportfs -v</strong> : Displays a list of shares <strong>files</strong> and
<strong>options</strong> on a server</li>
<li><strong>exportfs -a</strong> : Exports all shares listed in <strong>/etc/exports</strong>, or
given name</li>
<li><strong>exportfs -u</strong> : Unexports all shares listed in <strong>/etc/exports</strong>,
or given name</li>
<li><strong>exportfs -r</strong> : Refresh the server’s list after modifying
<strong>/etc/exports</strong></li>
</ol>
</div>
</div>
</div>
<div class="section" id="create-a-swarm-cluster">
<h2>Create a swarm Cluster<a class="headerlink" href="#create-a-swarm-cluster" title="Permalink to this headline">¶</a></h2>
<p>===========================</p>
<p>After you complete the (https://docs.docker.com/engine/swarm/swarm-tutorial/) steps,
you’re ready to create a swarm. Make sure the Docker Engine daemon is
started on the host machines.</p>
<div class="section" id="init-swarm-manager-node">
<h3>Init Swarm Manager Node<a class="headerlink" href="#init-swarm-manager-node" title="Permalink to this headline">¶</a></h3>
<p>=============================</p>
<ol>
<li><p class="first">Open a terminal and ssh into the machine where you want to run your
manager node. This tutorial uses a machine named
<code class="docutils literal notranslate"><span class="pre">manager1</span></code>. If you use Docker Machine, you can
connect to it via SSH using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker-machine ssh manager1
</pre></div>
</div>
</li>
<li><p class="first">Run the following command to create a new swarm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker swarm init --advertise-addr &lt;MANAGER-IP&gt;
</pre></div>
</div>
<blockquote>
<div><p><strong>Note</strong>: If you are using Docker Desktop for Mac or Docker
Desktop for Windows to test single-node swarm, simply run
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">swarm</span> <span class="pre">init</span></code> with no arguments. There
is no need to specify <code class="docutils literal notranslate"><span class="pre">--advertise-addr</span></code> in
this case. To learn more, see the topic on how to <a class="reference external" href="https://docs.docker.com/engine/swarm/swarm-tutorial/#use-docker-for-mac-or-docker-for-windows">Use Docker
Desktop or Mac or Docker Desktop for
Windows</a>
with Swarm.</p>
</div></blockquote>
<p>In the tutorial, the following command creates a swarm on the
<code class="docutils literal notranslate"><span class="pre">manager1</span></code> machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker swarm init --advertise-addr 192.168.99.100
</pre></div>
</div>
<p>Swarm initialized: current node (dxn1zf6l61qsb1josjja83ngz) is now a manager.</p>
<p>To add a worker to this swarm, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
$ docker swarm join \
--token SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c \
192.168.99.100:2377
```
</pre></div>
</div>
<p>To add a manager to this swarm, run ‘docker swarm join-token manager’ and follow the instructions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--advertise-addr</span></code> flag configures the
manager node to publish its address as
<code class="docutils literal notranslate"><span class="pre">192.168.99.100</span></code>. The other nodes in the swarm
must be able to access the manager at the IP address.</p>
<p>The output includes the commands to join new nodes to the swarm.
Nodes will join as managers or workers depending on the value for
the <code class="docutils literal notranslate"><span class="pre">--token</span></code> flag.</p>
</li>
<li><p class="first">Run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">info</span></code> to view the current state of
the swarm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker info

Containers: 2
Running: 0
Paused: 0
Stopped: 2
  ...snip...
Swarm: active
  NodeID: dxn1zf6l61qsb1josjja83ngz
  Is Manager: true
  Managers: 1
  Nodes: 1
  ...snip...
</pre></div>
</div>
</li>
<li><p class="first">Run the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">node</span> <span class="pre">ls</span></code> command to view
information about nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker node ls

ID                           HOSTNAME  STATUS  AVAILABILITY  MANAGER STATUS
dxn1zf6l61qsb1josjja83ngz *  manager1  Ready   Active        Leader
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">*</span></code> next to the node ID indicates that
you’re currently connected on this node.</p>
<p>Docker Engine swarm mode automatically names the node for the
machine host name.</p>
</li>
</ol>
</div>
<div class="section" id="add-nodes-to-the-swarm">
<h3>Add nodes to the swarm<a class="headerlink" href="#add-nodes-to-the-swarm" title="Permalink to this headline">¶</a></h3>
<p>=============================</p>
<ol>
<li><p class="first">Open a terminal and ssh into the machine where you want to run a
worker node. This tutorial uses the name
<code class="docutils literal notranslate"><span class="pre">worker1</span></code>.</p>
</li>
<li><p class="first">Run the command produced by the
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">swarm</span> <span class="pre">init</span></code> output from the <a class="reference external" href="https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/">Create a
swarm</a>
tutorial step to create a worker node joined to the existing swarm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker swarm join \
  --token  SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c \
  192.168.99.100:2377
</pre></div>
</div>
<p>This node joined a swarm as a worker.</p>
<p>If you don’t have the command available, you can run the following
command on a manager node to retrieve the join command for a worker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker swarm join-token worker
</pre></div>
</div>
<p>To add a worker to this swarm, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">docker</span> <span class="n">swarm</span> <span class="n">join</span> \
    <span class="o">--</span><span class="n">token</span> <span class="n">SWMTKN</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">49</span><span class="n">nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv</span><span class="o">-</span><span class="mi">8</span><span class="n">vxv8rssmk743ojnwacrr2e7c</span> \
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">99.100</span><span class="p">:</span><span class="mi">2377</span>
</pre></div>
</div>
</li>
<li><p class="first">Open a terminal and ssh into the machine where you want to run a
second worker node. This tutorial uses the name
<code class="docutils literal notranslate"><span class="pre">worker2</span></code>.</p>
</li>
<li><p class="first">Run the command produced by the
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">swarm</span> <span class="pre">init</span></code> output from the <a class="reference external" href="https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/">Create a
swarm</a>
tutorial step to create a second worker node joined to the existing
swarm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker swarm join \
  --token SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c \
  192.168.99.100:2377
</pre></div>
</div>
</li>
</ol>
<p>This node joined a swarm as a worker.</p>
<ol>
<li><p class="first">Open a terminal and ssh into the machine where the manager node runs
and run the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">node</span> <span class="pre">ls</span></code> command to see the
worker nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker node ls

ID                           HOSTNAME  STATUS  AVAILABILITY  MANAGER STATUS
03g1y59jwfg7cf99w4lt0f662    worker2   Ready   Active
9j68exjopxe7wfl6yuxml7a7j    worker1   Ready   Active
dxn1zf6l61qsb1josjja83ngz *  manager1  Ready   Active        Leader
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MANAGER</span></code> column identifies the manager
nodes in the swarm. The empty status in this column for
<code class="docutils literal notranslate"><span class="pre">worker1</span></code> and <code class="docutils literal notranslate"><span class="pre">worker2</span></code>
identifies them as worker nodes.</p>
<p>Swarm management commands like <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">node</span> <span class="pre">ls</span></code>
only work on manager nodes.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="clone-zisoft-awareness-project">
<h2>Clone Zisoft awareness  project<a class="headerlink" href="#clone-zisoft-awareness-project" title="Permalink to this headline">¶</a></h2>
<p>Run the command where /zisoft-ha/ is shared-FS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /zisoft-ha/
$ git clone https://gitlab.com/zisoft/awareness.git
$ cd awareness
$ zisoft build --docker --sass --app --ui --composer
$ zisoft package
$ zisoft deploy --prod
</pre></div>
</div>
</div>
<div class="section" id="deploy-zisoft-awareness-offline-project">
<h2>Deploy Zisoft awareness offline project<a class="headerlink" href="#deploy-zisoft-awareness-offline-project" title="Permalink to this headline">¶</a></h2>
<p>Run the command :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /zisoft-ha/
$ zisoft deploy --prod
</pre></div>
</div>
</div>
</div>
<div class="section" id="awareness-offline-deployment">
<h1>Awareness Offline Deployment<a class="headerlink" href="#awareness-offline-deployment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li>Docker swarm mode  active :</li>
</ol>
<p>Run the command :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker info
</pre></div>
</div>
<p>Check if swarm mode is active</p>
<p><img alt="https://awareness-docs.s3.us-east-2.amazonaws.com/_static/images/swarm-active.png" src="https://awareness-docs.s3.us-east-2.amazonaws.com/_static/images/swarm-active.png" /></p>
<ol class="simple">
<li>Nodejs, Npm ,Unzip Package installed.</li>
<li>Offline zisoft-xxxxxxx.Zip file downloaded from release artifacts.</li>
</ol>
</div>
<div class="section" id="extract-zisoft-xxxxxxx-zip-file">
<h2>Extract zisoft-xxxxxxx.Zip file<a class="headerlink" href="#extract-zisoft-xxxxxxx-zip-file" title="Permalink to this headline">¶</a></h2>
<p>Run the command :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ unzip zisoft-xxxxxxx.zip
</pre></div>
</div>
</div>
<div class="section" id="load-zisoft-awareness-docker-images">
<h2>Load Zisoft awareness docker images<a class="headerlink" href="#load-zisoft-awareness-docker-images" title="Permalink to this headline">¶</a></h2>
<p>Run the command :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd zisoft-xxxxxxx
$ zisoft load 
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h2>Deploy Zisoft awareness offline project<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Run the command :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ zisoft deploy --offline
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../sizing/sizing.html" class="btn btn-neutral float-right" title="ZiSoft Awareness HW Sizing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../user_guide/user_guide.html" class="btn btn-neutral float-left" title="Initial Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Entrench
      <span class="lastupdated">
        Last updated on 2020-Mar-26.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>